avatar
    over-ground(center,layred,autoClose,bodyScale="false")
        cropper
    #wrapper(onmouseover="{{showBack}}",onmouseout="{{hideBack}}")
        img(if="{{src}}",src="{{src}}",class='{{(file.value || showBackdrop) ? "opacity" : ""}}')
        #imageSubstitute(if="{{!src}}",class='{{(file.value || showBackdrop) ? "opacity" : ""}}')
        #stroke
        #backdrop(show="{{showBackdrop}}")
            #loading(show="{{inProcess}}")
            form(show="{{!inProcess}}",enctype="multipart/form-data",action="/user/avatar-upload",method="POST",onsubmit="{{uploadFile}}")
                x-tooltip(msg='{{errors}}')
                #fileName(title="{{basename(file.value)}}") {{cropString(basename(file.value),25)}}
                #fakeFile(show="{{!file.value}}")
                    | Add
                    input(onchange="{{changeFile}}",type="file",name="file")#file
                input(show="{{file.value}}",type="submit",value="Ok")#ok
                #reset(show="{{file.value}}",onclick="{{resetFile}}") Reset
                #crop(show="{{cropper.pth}}",onclick="{{openCropDialog}}") Crop

